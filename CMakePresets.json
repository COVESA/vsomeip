{
    "version": 3,
    "cmakeMinimumRequired": {
        "major": 3,
        "minor": 13
    },
    "configurePresets": [
        {
            "name": "sdk-node0",
            "displayName": "Node0 SDK",
            "description": "Build using Node0 SDK",
            "generator": "Ninja",
            "binaryDir": "/tmp/build",
            "installDir": "/usr",
            "cacheVariables": {
                "BASE_PATH": {
                    "type": "PATH",
                    "value": "/run/someip"
                },
                "DEFAULT_CONFIGURATION_FOLDER": {
                    "type": "PATH",
                    "value": "/run/etc/vsomeip"
                },
                "ROUTING_READY_MESSAGE": {
                    "type": "STRING",
                    "value": "MARKER KPI NET4 SOME/IP Routing Ready"
                }
            },
            "environment": {
                "GTEST_ROOT": "n/a"
            }
        },
        {
            "name": "ci-network-tests",
            "displayName": "Network tests (CI)",
            "description": "Preset for network tests on CI",
            "generator": "Ninja",
            "binaryDir": "/home/build",
            "cacheVariables": {
                "DISABLE_DLT": {
                    "type": "BOOL",
                    "value": "ON"
                },
                "CMAKE_CXX_FLAGS_INIT": {
                    "type": "STRING",
                    "value": "--coverage -Wno-error=tsan -fprofile-update=atomic"
                },
                "TEST_IP_SLAVE_SECOND": {
                    "type": "STRING",
                    "value": "$penv{IP_SLAVE_2ND}"
                },
                "TEST_GID": {
                    "type": "STRING",
                    "value": "0"
                },
                "TEST_UID": {
                    "type": "STRING",
                    "value": "0"
                }
            },
            "environment": {
                "GTEST_ROOT": "/usr/src/googletest"
            }
        }
    ],
    "buildPresets": [
        {
            "name": "sdk-node0",
            "displayName": "Node0 SDK",
            "description": "Build using Node0 SDK",
            "environment": {
                "DESTDIR": "/tmp/install"
            },
            "configurePreset": "sdk-node0",
            "jobs": 16,
            "targets": "install"
        },
        {
            "name": "ci-network-tests",
            "displayName": "Network tests (CI)",
            "description": "Preset for network tests on CI",
            "configurePreset": "ci-network-tests",
            "targets": "build_tests"
        }
    ],
    "testPresets": [
        {
            "name": "ci-network-tests",
            "displayName": "Network tests (CI)",
            "description": "Preset for network tests on CI",
            "environment": {
                "LD_LIBRARY_PATH": "/home/build",
                "LXC_TEST_MASTER_IP": "master",
                "LXC_TEST_SLAVE_IP": "slave",
                "TSAN_OPTIONS": "suppressions=${sourceDir}/test/tsan-suppressions.txt",
                "USE_LXC_TEST": "1"
            },
            "configurePreset": "ci-network-tests",
            "output": {
                "maxFailedTestOutputSize": 1e9,
                "maxPassedTestOutputSize": 1e9,
                "outputOnFailure": true
            },
            "execution": {
                "timeout": 150
            }
        }
    ]
}